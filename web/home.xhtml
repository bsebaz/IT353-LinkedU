<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>LinkedU</title>
        <h:outputStylesheet name="css/bootstrap.min.css"/>
        <h:outputStylesheet name="css/LinkedU.css"/>
        <h:outputScript name="js/bootstrap.min.js"/>
        <h:outputScript name="js/jquery-3.3.1.min.js"/>
    </h:head>
    <h:body>
        <ui:insert><ui:include src="nav.xhtml"/></ui:insert>
        <div class="container my-4">
            <div class="row">
                <div class="col-12 homeCards">
                    <div class="row">
                        <div class="col-8">
                            <h2>Featured Universities</h2>
                            <ui:repeat value="#{homeController.featuredUniversities}" var="university">
                                <h:form>
                                    <div class="card my-3">
                                        <div class="card-img-top homeCardTop" style="background-color: ##{university.accentColor}"></div>
                                        <div class="card-body">
                                            <h5 class="card-title"><h:outputText value="#{university.name}"/></h5>
                                            <p>
                                                <h:outputText value="#{university.name}"/> is located in
                                                <h:outputText value="#{university.city}"/>, <h:outputText value="#{university.state}"/>.
                                                Most recently, student enrollment was <h:outputText value="#{universalController.formatNumber(university.studentPopulation)}"/>.
                                                The average tuition at <h:outputText value="#{university.name}"/> is currently $<h:outputText value="#{universalController.formatNumber(university.cost)}"/>.
                                            </p>
                                            <h:button class="btn homeCardButton" style="background-color: ##{university.accentColor}" value="Profile" outcome="universityDetail?faces-redirect=true">
                                                <f:param name="universityId" value="#{university.universityId}"/>
                                            </h:button>
                                        </div>
                                    </div>
                                </h:form>
                            </ui:repeat>
                        </div>
                        <div class="col-4">
                            <!-- Sidebar Content -->
                            <div class="my-3" style="border-left: 1px solid #ccc; padding: 1em;">
                                <h3>Suggested Universities</h3>
                                <ul class="list-group my-3">
                                    <ui:repeat value="#{homeController.featuredUniversities}" var="university">
                                        <li class="list-group-item">
                                            <a href="universityDetail.xhtml?universityId=#{university.universityId}">#{university.name}</a>
                                        </li>
                                    </ui:repeat>
                                </ul>
                                <h:form>
                                    <h:button class="btn btn-primary" value="Compare Universities" outcome="compareUniversities?faces-redirect=true">
                                        <f:param name="universityId1" value="#{homeController.selectedUniversity1.universityId}"/>
                                        <f:param name="universityId2" value="#{homeController.selectedUniversity2.universityId}"/>
                                    </h:button>
                                </h:form>
                            
                                <!--(accountController.user.admin) or (accountController.user.accountType == 'recruiter')-->
                                <c:if test="#{accountController.loggedIn}">
                                    <br/><br/>
                                    <!-- Application Forms Content (visible only by admin or University Recruiter) -->
                                    <h3>Application Forms</h3>
                                    <ul class="list-group my-3" style="list-style-type: none;">
                                        <ui:repeat value="#{homeController.featuredUniversities}" var="application_form">
                                            <li style="padding:3px;">
                                                <!-- todo: navigation to applicationFormEditor-->
                                                <!-- make button ~30 characters with ... at the end (if longer, pad otherwise)-->
                                                <h:button class="btn btn-primary" style="width: 100%; text-align: left;" value="#{application_form.name}" outcome="applicationFormEditor?faces-redirect=true"/>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </c:if>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </h:body>
</html>
